%nav.navbar.navbar-default.navbar-static-top.navbar-inverse
  .container-fluid
    .navbar-header
      = link_to image_tag('vvnewlogo.png', size: '50', alt: 'Brand'), home_path, class: 'navbar-brand'
    %ul.nav.navbar-nav
      - if current_user
        %li.dropdown
          %a.dropdown-toggle{ href: '#', :'data-toggle' => 'dropdown', role: 'button' }
            Video Forms
            %span.caret
          %ul.dropdown-menu{ role: 'menu' }
            %li= link_to "Recent", trackers_path(recent: true)
            %li.dropdown-submenu
              %a{ href: "#" } New Video Entry
              %ul.dropdown-menu
                - State.all.order(:name).each do |state|
                  %li= link_to state.name, new_tracker_path(state_name: "#{state.name}")
        %li.dropdown
          %a.dropdown-toggle{ href: '#', :'data-toggle' => 'dropdown', role: 'button' }
            Editors View
            %span.caret
          %ul.dropdown-menu{ role: 'menu' }
            %h4.text-center Editors
            - employees = employee_set
            - employees[:editor].each do |employee|
              %li.dropdown-submenu
                %a{ href: "#" } #{ employee }
                %ul.dropdown-menu
                  %li= link_to 'To Edit', trackers_path(view: "edit", name: "#{ employee }")
                  %li= link_to 'To Finalize', trackers_path(view: "finalize", name: "#{ employee }")
        %li.dropdown
          %a.dropdown-toggle{ href: '#', :'data-toggle' => 'dropdown', role: 'button' }
            Coordinators View
            %span.caret
          %ul.dropdown-menu{ role: 'menu' }
            %h4.text-center Coordinators
            - employees[:sc].each do |employee|
              %li.dropdown-submenu
                %a{ href: "#" } #{ employee }
                %ul.dropdown-menu
                  %li= link_to 'Pitched', trackers_path(view: "pitched", name: "#{ employee }")
                  %li= link_to 'Produced', trackers_path(view: "produced", name: "#{ employee }")
                  %li= link_to 'Hold', trackers_path(view: "hold", name: "#{ employee }")
        %li.dropdown
          %a.dropdown-toggle{ href: '#', :'data-toggle' => 'dropdown', role: 'button' }
            CCs
            %span.caret
          %ul.dropdown-menu{ role: 'menu' }
            %li= link_to "View All", ccs_path
            %li= link_to "New", new_cc_path
        %li.dropdown
          %a.dropdown-toggle{ href: '#', :'data-toggle' => 'dropdown', role: 'button' }
            States
            %span.caret
          %ul.dropdown-menu{ role: 'menu' }
            %li.dropdown-submenu
              %a{ href: "#" } View All By State
              %ul.dropdown-menu
                - State.all.order(:name).each do |state|
                  %li= link_to state.name, trackers_path(state_name: "#{state.name}")
            - if current_user.try(:admin?)
              %li= link_to "View All States", states_path
              %li= link_to "New", new_state_path
    %ul.nav.navbar-nav.navbar-right
      - if current_user
        %li.dropdown
          %a.dropdown-toggle{ href: '#', :'data-toggle' => 'dropdown', role: 'button' }
            Welcome #{ current_user.email }
            %span.caret
          %ul.dropdown-menu{ role: 'menu' }
            - if current_user.try(:admin?)
              %li= link_to "View All", users_path
              %li= link_to "View Unverified", users_path(approved: "false")
            %li= link_to "Change your password", edit_user_registration_path
            %li= link_to "Log Out", destroy_user_session_path, method: :delete
      - else
        %li= link_to "Log In", new_user_session_path
